(()=>{var e={};e.id=513,e.ids=[513],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11066:(e,t,s)=>{Promise.resolve().then(s.bind(s,56871))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},24555:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},51234:(e,t,s)=>{Promise.resolve().then(s.bind(s,95615))},55511:e=>{"use strict";e.exports=require("crypto")},56871:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/likeflow/feed/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/likeflow/feed/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},86779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var a=s(65239),i=s(48088),r=s(88170),n=s.n(r),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c={children:["",{children:["likeflow",{children:["feed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,56871)),"/home/user/studio/src/app/likeflow/feed/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7935)),"/home/user/studio/src/app/likeflow/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/user/studio/src/app/likeflow/feed/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/likeflow/feed/page",pathname:"/likeflow/feed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},88920:(e,t,s)=>{"use strict";s.d(t,{N:()=>y});var a=s(60687),i=s(43210),r=s(12157),n=s(72789),l=s(21279),o=s(32582);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let s=(0,i.useId)(),r=(0,i.useRef)(null),n=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:l}=(0,i.useContext)(o.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:a,top:i,left:o}=n.current;if(t||!r.current||!e||!a)return;r.current.dataset.motionPopId=s;let c=document.createElement("style");return l&&(c.nonce=l),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${i}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),(0,a.jsx)(c,{isPresent:t,childRef:r,sizeRef:n,children:i.cloneElement(e,{ref:r})})}let u=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:o,presenceAffectsLayout:c,mode:u})=>{let h=(0,n.M)(m),p=(0,i.useId)(),x=(0,i.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;r&&r()},[h,r]),f=(0,i.useMemo)(()=>({id:p,initial:t,isPresent:s,custom:o,onExitComplete:x,register:e=>(h.set(e,!1),()=>h.delete(e))}),c?[Math.random(),x]:[s,x]);return(0,i.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[s]),i.useEffect(()=>{s||h.size||!r||r()},[s]),"popLayout"===u&&(e=(0,a.jsx)(d,{isPresent:s,children:e})),(0,a.jsx)(l.t.Provider,{value:f,children:e})};function m(){return new Map}var h=s(86044);let p=e=>e.key||"";function x(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var f=s(15124);let y=({children:e,custom:t,initial:s=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:c="sync",propagate:d=!1})=>{let[m,y]=(0,h.xQ)(d),b=(0,i.useMemo)(()=>x(e),[e]),j=d&&!m?[]:b.map(p),g=(0,i.useRef)(!0),v=(0,i.useRef)(b),w=(0,n.M)(()=>new Map),[N,k]=(0,i.useState)(b),[F,P]=(0,i.useState)(b);(0,f.E)(()=>{g.current=!1,v.current=b;for(let e=0;e<F.length;e++){let t=p(F[e]);j.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[F,j.length,j.join("-")]);let M=[];if(b!==N){let e=[...b];for(let t=0;t<F.length;t++){let s=F[t],a=p(s);j.includes(a)||(e.splice(t,0,s),M.push(s))}"wait"===c&&M.length&&(e=M),P(x(e)),k(b);return}let{forceRender:C}=(0,i.useContext)(r.L);return(0,a.jsx)(a.Fragment,{children:F.map(e=>{let i=p(e),r=(!d||!!m)&&(b===F||j.includes(i));return(0,a.jsx)(u,{isPresent:r,initial:(!g.current||!!s)&&void 0,custom:r?void 0:t,presenceAffectsLayout:o,mode:c,onExitComplete:r?void 0:()=>{if(!w.has(i))return;w.set(i,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),P(v.current),d&&(null==y||y()),l&&l())},children:e},i)})})}},89667:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(60687),i=s(43210),r=s(4780);let n=i.forwardRef(({className:e,type:t,...s},i)=>(0,a.jsx)("input",{type:t,className:(0,r.cn)("flex h-auto w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));n.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95615:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var a=s(60687),i=s(43210),r=s.n(i),n=s(8693),l=s(51423),o=s(65406),c=s(33465),d=s(35536),u=s(31212),m=class extends d.Q{#e;#t=void 0;#s;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,u.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,u.EN)(t.mutationKey)!==(0,u.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#r()}mutate(e,t){return this.#a=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,o.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){c.jG.batch(()=>{if(this.#a&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#a.onSuccess?.(e.data,t,s,a),this.#a.onSettled?.(e.data,null,t,s,a)):e?.type==="error"&&(this.#a.onError?.(e.error,t,s,a),this.#a.onSettled?.(void 0,e.error,t,s,a))}this.listeners.forEach(e=>{e(this.#t)})})}};function h(e,t){let s=(0,n.jE)(t),[a]=i.useState(()=>new m(s,e));i.useEffect(()=>{a.setOptions(e)},[a,e]);let r=i.useSyncExternalStore(i.useCallback(e=>a.subscribe(c.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=i.useCallback((e,t)=>{a.mutate(e,t).catch(u.lQ)},[a]);if(r.error&&(0,u.GU)(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:l,mutateAsync:r.mutate}}var p=s(26838),x=s(82614);let f=(0,x.A)("Disc3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]]);var y=s(58595);let b=(0,x.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),j=(0,x.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),g=(0,x.A)("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),v=(0,x.A)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),w=(0,x.A)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var N=s(97905),k=s(88920),F=s(21777);let P=({id:e,onComplete:t,color:s="#FFD700"})=>{let i=80*Math.random()-40,r=60*Math.random()-30,n=16*Math.random()+20;return(0,a.jsx)(N.P.div,{initial:{opacity:1,y:0,x:0,scale:0,rotate:0},animate:{opacity:[1,1,0],y:-200,x:i,scale:[0,1.2,.8],rotate:r},transition:{duration:1.5,ease:"easeOut"},onAnimationComplete:()=>t(e),className:"absolute bottom-0 right-0 pointer-events-none",children:(0,a.jsx)(p.A,{style:{width:n,height:n},className:"drop-shadow-lg",fill:s,color:s})})},M=({show:e})=>(0,a.jsx)(k.N,{children:e&&(0,a.jsx)(N.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",children:(0,a.jsx)(N.P.div,{animate:{scale:[1,1.3,1]},transition:{duration:.4},children:(0,a.jsx)(p.A,{className:"w-32 h-32 fill-[#FFD700] text-[#FFD700] drop-shadow-2xl"})})})});function C({post:e,onLike:t,userLikes:s,isActive:r,onOpenComments:n,onOpenShare:l}){let[o,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!0),[x,C]=(0,i.useState)(!1),[A,D]=(0,i.useState)(0),q=(0,i.useRef)(null),S=(0,i.useRef)(null),{playSound:z}=(0,F.f)(),R=()=>{if(s<=0)return!1;u(!0),setTimeout(()=>u(!1),200);let a=["#FFD700","#FFA500","#FF6B6B","#FF1493","#FFD700"];for(let e=0;e<5;e++)setTimeout(()=>{let t=Date.now()+Math.random();c(s=>[...s,{id:t,color:a[e%a.length]}])},50*e);return z?.("like",.6),t(e.id),!0},T=()=>{R()},O=e=>{c(t=>t.filter(t=>t.id!==e))};return(0,a.jsxs)("div",{className:"h-[100dvh] w-full bg-black relative flex items-center justify-center snap-start snap-always overflow-hidden",onClick:e=>{if(e.target.closest("button"))return;let t=Date.now();t-A<300&&R()&&(C(!0),setTimeout(()=>C(!1),800)),D(t)},children:[(0,a.jsxs)("div",{className:"absolute inset-0 w-full h-full",children:[e.mediaType&&e.mediaType.startsWith("video")&&(0,a.jsx)("video",{ref:q,src:e.mediaUrl,className:"absolute inset-0 w-full h-full object-contain bg-black",loop:!0,muted:m,playsInline:!0,"webkit-playsinline":"true"}),e.mediaType&&e.mediaType.startsWith("image")&&(0,a.jsx)(N.P.img,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},src:e.mediaUrl,alt:e.description||"Post",className:"absolute inset-0 w-full h-full object-contain bg-black"}),e.mediaType&&e.mediaType.startsWith("audio")&&(0,a.jsxs)("div",{className:"absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-[#1a1a1a] to-black",children:[(0,a.jsxs)(N.P.div,{animate:r?{rotate:360}:{},transition:{duration:3,repeat:1/0,ease:"linear"},className:"relative w-56 h-56",children:[(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-[#FFD700] via-[#B8860B] to-[#8B6914] shadow-2xl shadow-[#FFD700]/30"}),(0,a.jsx)("div",{className:"absolute inset-6 rounded-full bg-black"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(f,{className:"w-24 h-24 text-[#FFD700]"})}),(0,a.jsx)("div",{className:"absolute inset-10 rounded-full border border-[#333]"}),(0,a.jsx)("div",{className:"absolute inset-16 rounded-full border border-[#333]"}),(0,a.jsx)("div",{className:"absolute inset-20 rounded-full border border-[#333]"})]}),(0,a.jsx)("audio",{ref:S,src:e.mediaUrl,loop:!0,muted:m})]})]}),(0,a.jsx)(M,{show:x}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-80 bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none"}),(0,a.jsxs)("div",{className:"absolute right-3 bottom-32 flex flex-col items-center gap-5 z-10",children:[(0,a.jsxs)(N.P.div,{className:"relative mb-2",whileHover:{scale:1.1},children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#FFD700] to-[#B8860B] flex items-center justify-center border-2 border-white",children:(0,a.jsx)(y.A,{className:"w-6 h-6 text-black"})}),(0,a.jsx)(N.P.div,{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full bg-[#FFD700] flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,a.jsx)("span",{className:"text-black text-lg font-bold",children:"+"})})]}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,a.jsxs)(N.P.button,{onClick:e=>{e.stopPropagation(),T()},animate:d?{scale:[1,1.4,1]}:{scale:[1,1.08,1]},transition:d?{duration:.2}:{duration:2,repeat:1/0,ease:"easeInOut"},disabled:s<=0,className:`relative w-12 h-12 rounded-full flex items-center justify-center ${s>0?"":"opacity-40"}`,children:[(0,a.jsx)(N.P.div,{className:"absolute inset-0 rounded-full bg-[#FFD700]/30 blur-lg",animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0}}),(0,a.jsx)(p.A,{className:`w-9 h-9 relative z-10 drop-shadow-lg ${s>0?"text-white fill-[#FFD700]":"text-gray-500"}`})]}),(0,a.jsx)(N.P.span,{className:"text-white font-bold text-xs mt-1",animate:d?{scale:[1,1.3,1]}:{},children:e.likes||0}),(0,a.jsx)(k.N,{children:o.map(e=>(0,a.jsx)(P,{id:e.id,color:e.color,onComplete:O},e.id))})]}),(0,a.jsxs)(N.P.button,{className:"flex flex-col items-center",whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),n?.()},children:[(0,a.jsx)("div",{className:"w-12 h-12 flex items-center justify-center",children:(0,a.jsx)(b,{className:"w-8 h-8 text-white drop-shadow-lg"})}),(0,a.jsx)("span",{className:"text-white font-bold text-xs",children:0})]}),(0,a.jsxs)(N.P.button,{className:"flex flex-col items-center",whileTap:{scale:.9},onClick:e=>{e.stopPropagation(),l?.()},children:[(0,a.jsx)("div",{className:"w-12 h-12 flex items-center justify-center",children:(0,a.jsx)(j,{className:"w-8 h-8 text-white drop-shadow-lg"})}),(0,a.jsx)("span",{className:"text-white font-bold text-xs",children:"Condividi"})]}),("video"===e.mediaType||"audio"===e.mediaType)&&(0,a.jsx)(N.P.button,{onClick:e=>{e.stopPropagation(),h(!m),z?.("tap",.3),q.current&&(q.current.muted=!m),S.current&&(S.current.muted=!m)},whileTap:{scale:.9},className:"w-10 h-10 rounded-full bg-black/40 backdrop-blur-sm flex items-center justify-center border border-white/20",children:m?(0,a.jsx)(g,{className:"w-5 h-5 text-white"}):(0,a.jsx)(v,{className:"w-5 h-5 text-white"})})]}),(0,a.jsxs)(N.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"absolute bottom-28 left-4 right-20 z-10",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-white font-black text-sm tracking-tighter",children:"LIKE"}),(0,a.jsx)("span",{className:"text-[#FFD700] font-black text-sm tracking-tighter",children:"FLOW"})]})}),(0,a.jsxs)(N.P.div,{className:"flex items-center gap-2 mb-2",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:[(0,a.jsxs)("span",{className:"text-white font-bold text-base",children:["@",e.authorName||"anonimo"]}),(0,a.jsxs)("span",{className:"text-gray-400 text-xs",children:["â€¢ ",(e=>{if(!e)return"";let t=e.toDate(),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?`${s}s`:s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h`:`${Math.floor(s/86400)}g`})(e.timestamp)]})]}),e.description&&(0,a.jsx)(N.P.p,{className:"text-white text-sm line-clamp-2 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:e.description}),(0,a.jsxs)(N.P.div,{className:"flex items-center gap-2 mt-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,a.jsx)(w,{className:"w-4 h-4 text-white"}),(0,a.jsx)("div",{className:"overflow-hidden max-w-[200px]",children:(0,a.jsxs)(N.P.p,{className:"text-white text-xs whitespace-nowrap",animate:{x:r?[0,-100,0]:0},transition:{duration:8,repeat:1/0,ease:"linear"},children:["Original Sound - ",e.authorName||"LikeFlow"]})})]})]}),(0,a.jsx)(N.P.div,{className:"absolute bottom-28 right-4 z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,a.jsxs)(N.P.div,{className:"flex items-center gap-2 bg-black/60 backdrop-blur-md rounded-full px-4 py-2 border border-[#FFD700]/30",animate:{boxShadow:["0 0 10px rgba(255,215,0,0.2)","0 0 20px rgba(255,215,0,0.4)","0 0 10px rgba(255,215,0,0.2)"]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-[#FFD700] fill-[#FFD700]"}),(0,a.jsx)("span",{className:"text-white text-sm font-bold",children:s})]})})]})}let A=(0,x.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var D=s(24555),q=s(83729),S=s(85814),z=s.n(S);function R(){return(0,a.jsxs)("div",{className:"h-[100dvh] w-full bg-black flex flex-col items-center justify-center px-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((e,t)=>(0,a.jsx)(N.P.div,{className:"absolute",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`},animate:{y:[0,-30,0],opacity:[.1,.3,.1],scale:[1,1.2,1]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()},children:(0,a.jsx)(p.A,{className:"w-4 h-4 text-[#FFD700]/30 fill-[#FFD700]/30"})},t))}),(0,a.jsxs)(N.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center relative z-10",children:[(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)(N.P.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0},className:"w-32 h-32 rounded-3xl bg-gradient-to-br from-[#FFD700] to-[#B8860B] flex items-center justify-center mx-auto shadow-2xl shadow-[#FFD700]/30",children:(0,a.jsx)(A,{className:"w-16 h-16 text-black ml-2"})}),[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(N.P.div,{className:"absolute",style:{top:`${10+20*t}%`,left:t%2==0?"-20%":"100%"},animate:{y:[0,-20,0],rotate:[0,180,360],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,delay:.3*t},children:(0,a.jsx)(D.A,{className:"w-6 h-6 text-[#FFD700]"})},t))]}),(0,a.jsx)(N.P.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-white text-3xl font-bold mb-3",children:"Il feed \xe8 vuoto"}),(0,a.jsx)(N.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-gray-400 mb-10 max-w-xs text-lg",children:"Sii il primo a condividere qualcosa di speciale!"}),(0,a.jsx)(z(),{href:"/likeflow/upload",children:(0,a.jsxs)(N.P.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative flex items-center gap-3 bg-gradient-to-r from-[#FFD700] to-[#B8860B] text-black font-bold px-8 py-4 rounded-full text-lg shadow-lg shadow-[#FFD700]/30",children:[(0,a.jsx)(q.A,{className:"w-6 h-6"}),"Crea il primo post",(0,a.jsx)(N.P.div,{className:"absolute inset-0 rounded-full border-2 border-[#FFD700]",animate:{scale:[1,1.2,1],opacity:[1,0,1]},transition:{duration:1.5,repeat:1/0}})]})})]})]})}var T=s(78726);function O({isOpen:e,onClose:t}){return e?(0,a.jsx)(k.N,{children:(0,a.jsx)(N.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:(0,a.jsxs)(N.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-[#111] border border-[#FFD700]/30 rounded-2xl p-6 max-w-sm w-full",children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:(0,a.jsx)(T.A,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#FFD700] to-[#B8860B] flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.A,{className:"w-8 h-8 text-black fill-black"})}),(0,a.jsx)("h3",{className:"text-white text-xl font-bold mb-2",children:"Like terminati!"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Acquista un pacchetto per continuare a supportare i tuoi creator preferiti"}),(0,a.jsx)(z(),{href:"/likeflow/purchase",onClick:t,children:(0,a.jsxs)(N.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-[#FFD700] to-[#B8860B] text-black font-bold py-3 rounded-full",children:[(0,a.jsx)(D.A,{className:"w-5 h-5"}),"Acquista Like"]})})]})]})})}):null}let E=(0,x.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var B=s(89667),L=s(75535),$=s(40880);let{firestore:I}=(0,$.AU)();function _({isOpen:e,onClose:t,postId:s}){let[r,o]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),u=(0,n.jE)(),{data:m=[],isLoading:p}=(0,l.I)({queryKey:["comments",s],queryFn:()=>{if(!s)return[];let e=(0,L.rJ)(I,"comments"),t=(0,L.P)(e,(0,L._M)("postId","==",s),(0,L.My)("timestamp","desc"));return new Promise(e=>{(0,L.aQ)(t,t=>{e(t.docs.map(e=>({id:e.id,...e.data()})))})})},enabled:e&&!!s}),x=h({mutationFn:e=>{let t={...e,timestamp:(0,L.O5)()};return(0,$.BH)((0,L.rJ)(I,"comments"),t)},onSuccess:()=>{u.invalidateQueries({queryKey:["comments",s]}),o("")}}),f=e=>{if(!e)return"";let t=e.toDate(),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?`${s}s`:s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h`:`${Math.floor(s/86400)}g`};return(0,a.jsx)(k.N,{children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 z-50"}),(0,a.jsxs)(N.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 bg-[#111] rounded-t-3xl z-50 max-h-[70vh] flex flex-col",children:[(0,a.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,a.jsx)("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-gray-800",children:[(0,a.jsxs)("h3",{className:"text-white font-bold text-lg",children:[m.length," commenti"]}),(0,a.jsx)("button",{onClick:t,className:"p-2",children:(0,a.jsx)(T.A,{className:"w-6 h-6 text-gray-400"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:p?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[#FFD700] border-t-transparent rounded-full animate-spin"})}):0===m.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Nessun commento ancora"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Sii il primo a commentare!"})]}):m.map((e,t)=>(0,a.jsxs)(N.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"flex gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#FFD700]/30 to-[#B8860B]/30 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(y.A,{className:"w-5 h-5 text-[#FFD700]"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-white font-medium text-sm",children:e.authorName||"Anonimo"}),(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:f(e.timestamp)})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:e.text})]})]},e.id))}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&s&&(c&&localStorage.setItem("likeflow_username",c),x.mutate({postId:s,authorName:c||"Anonimo",text:r.trim()}))},className:"p-4 border-t border-gray-800 bg-[#0a0a0a]",children:[(0,a.jsx)("div",{className:"flex gap-2 mb-2",children:(0,a.jsx)(B.p,{value:c,onChange:e=>d(e.target.value),placeholder:"Il tuo nome",className:"flex-1 bg-[#1a1a1a] border-gray-700 text-white text-sm h-10 rounded-full px-4"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(B.p,{value:r,onChange:e=>o(e.target.value),placeholder:"Aggiungi un commento...",className:"flex-1 bg-[#1a1a1a] border-gray-700 text-white text-sm h-12 rounded-full px-4"}),(0,a.jsx)(N.P.button,{whileTap:{scale:.9},type:"submit",disabled:!r.trim()||x.isPending,className:"w-12 h-12 rounded-full bg-[#FFD700] flex items-center justify-center disabled:opacity-50",children:(0,a.jsx)(E,{className:"w-5 h-5 text-black"})})]})]})]})]})})}var H=s(58450);let U=(0,x.A)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),G=[{name:"TikTok",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:(0,a.jsx)("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})}),color:"bg-black border-2 border-white",action:e=>`https://www.tiktok.com/share?url=${encodeURIComponent(e)}`},{name:"WhatsApp",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:(0,a.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),color:"bg-green-500",action:e=>`https://wa.me/?text=${encodeURIComponent(e)}`},{name:"Telegram",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:(0,a.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),color:"bg-blue-500",action:e=>`https://t.me/share/url?url=${encodeURIComponent(e)}`},{name:"Facebook",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:(0,a.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),color:"bg-blue-600",action:e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`},{name:"Twitter",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current",children:(0,a.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),color:"bg-black border border-gray-700",action:e=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}`},{name:"Instagram",icon:()=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:(0,a.jsx)("path",{d:"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"})}),color:"bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400",action:()=>null}];function K({isOpen:e,onClose:t,postId:s}){let[i,n]=r().useState(!1),l=e=>{let t=e.action("");t&&window.open(t,"_blank","width=600,height=400")},o=async()=>{try{await navigator.clipboard.writeText(""),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,a.jsx)(k.N,{children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 z-50"}),(0,a.jsxs)(N.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 bg-[#111] rounded-t-3xl z-50",children:[(0,a.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,a.jsx)("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pb-4 border-b border-gray-800",children:[(0,a.jsx)("h3",{className:"text-white font-bold text-lg",children:"Condividi"}),(0,a.jsx)("button",{onClick:t,className:"p-2",children:(0,a.jsx)(T.A,{className:"w-6 h-6 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:G.map((e,t)=>(0,a.jsxs)(N.P.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},whileTap:{scale:.9},onClick:()=>l(e),className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:`w-14 h-14 rounded-full ${e.color} flex items-center justify-center text-white`,children:(0,a.jsx)(e.icon,{})}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:e.name})]},e.name))}),(0,a.jsx)(N.P.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},whileTap:{scale:.98},onClick:o,className:"w-full flex items-center justify-center gap-3 bg-[#222] rounded-2xl py-4 px-4",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-500 font-medium",children:"Link copiato!"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{className:"w-5 h-5 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-300 font-medium",children:"Copia link"})]})})]}),(0,a.jsx)("div",{className:"h-8"})]})]})})}var V=s(11516),Q=s(9623);let{firestore:W}=(0,$.AU)();function J(){let[e,t]=(0,i.useState)(0),[s,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),[x,f]=(0,i.useState)(!1),y=(0,i.useRef)(null),b=(0,n.jE)(),{wallet:j,useLike:g}=(0,Q.v)(),{playSound:v}=(0,F.f)(),{data:w=[],isLoading:P}=(0,l.I)({queryKey:["posts"],queryFn:async()=>{let e=(0,L.rJ)(W,"Posts"),t=(0,L.P)(e,(0,L.My)("timestamp","desc"),(0,L.AB)(100));return(await (0,L.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}}),M=h({mutationFn:async e=>{let t=(0,L.H9)(W,"Posts",e);(0,$.pt)(t,{likes:(0,L.GV)(1),likesWeek:(0,L.GV)(1)})},onSuccess:()=>{b.invalidateQueries({queryKey:["posts"]})}}),A=e=>{M.mutate(e),v("like",.6)};(0,i.useCallback)(()=>{if(y.current){let s=Math.round(y.current.scrollTop/window.innerHeight);s!==e&&(t(s),v("scroll",.2),f(!0),setTimeout(()=>f(!1),300))}},[e,v]);let D=e=>{p(e),c(!0)},q=e=>{p(e),u(!0)};return P?(0,a.jsxs)("div",{className:"h-[100dvh] w-full bg-black flex flex-col items-center justify-center",children:[(0,a.jsx)(N.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:(0,a.jsx)(V.A,{className:"w-12 h-12 text-[#FFD700]"})}),(0,a.jsx)(N.P.p,{className:"text-[#FFD700] mt-4 font-medium",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:"Caricamento..."})]}):0===w.length?(0,a.jsx)(R,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:y,className:"h-[100dvh] w-full bg-black overflow-y-scroll snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:[(0,a.jsx)(k.N,{children:x&&(0,a.jsx)(N.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:(0,a.jsx)(N.P.div,{className:"w-16 h-16 rounded-full border-2 border-[#FFD700]",animate:{scale:[1,1.5,1],opacity:[1,0,1]},transition:{duration:.3}})})}),w.map((t,s)=>(0,a.jsx)(C,{post:t,onLike:A,userLikes:j.likes,isActive:s===e,onOpenComments:()=>D(t.id),onOpenShare:()=>q(t.id)},t.id))]}),(0,a.jsx)(O,{isOpen:s,onClose:()=>r(!1)}),(0,a.jsx)(_,{isOpen:o,onClose:()=>c(!1),postId:m}),(0,a.jsx)(K,{isOpen:d,onClose:()=>u(!1),postId:m})]})}function X(){return(0,a.jsx)(J,{})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,446,658,841,759,975,993,95],()=>s(86779));module.exports=a})();