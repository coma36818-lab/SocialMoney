(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[400],{5839:(e,t,a)=>{"use strict";a.d(t,{r:()=>i,v:()=>o});var l=a(5155),s=a(2115);let r=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)({likes:0,uploads:0,credits:0,commission:0}),[o,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let s=localStorage.getItem("likeflow_wallet");if(s){var e,t,a,l;let r=JSON.parse(s);i({likes:null!=(e=r.likes)?e:0,uploads:null!=(t=r.uploads)?t:0,credits:null!=(a=r.credits)?a:0,commission:null!=(l=r.commission)?l:0})}else i(e=>({...e,uploads:0}))}catch(e){console.error("Failed to load wallet from localStorage",e),i(e=>({...e,uploads:0}))}n(!0)},[]),(0,s.useEffect)(()=>{o&&localStorage.setItem("likeflow_wallet",JSON.stringify(a))},[a,o]);let c=(0,s.useCallback)(e=>{i(t=>({...t,likes:t.likes+e}))},[]),d=(0,s.useCallback)(()=>!0,[]),u=(0,s.useCallback)(e=>{i(t=>({...t,uploads:t.uploads+e}))},[]),p=(0,s.useCallback)(()=>!0,[]),x=(0,s.useCallback)(e=>{i(t=>({...t,credits:t.credits+e}))},[]),m=(0,s.useCallback)(()=>{i(e=>({...e,credits:0}))},[]);return(0,l.jsx)(r.Provider,{value:{wallet:a,addLikes:c,useLike:d,addUploads:u,useUpload:p,addCredits:x,resetCredits:m},children:t})}function o(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useWallet must be used within a WalletProvider");return e}},6923:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},8098:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9002:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var l=a(5155),s=a(2115),r=a(9591),i=a(8098),o=a(6923),n=a(1978),c=a(5839),d=a(1966),u=a(5317);let{firestore:p}=(0,d.AU)(),x=()=>{{let e=localStorage.getItem("likeflow_userId");return e||(e="user_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9)),localStorage.setItem("likeflow_userId",e)),e}};async function m(e){return console.log("Simulating PayPal payment creation for €".concat(e)),"mock_paypal_tx_".concat(Date.now())}async function h(e){let t=(0,u.H9)(p,"Wallets",e),a=await (0,u.x7)(t);if(!a.exists()||a.data().credit<5)return void alert("Minimo €5 per riscuotere.");let l=a.data().credit;try{let a=await m(l);return(0,d.wu)(t,{credit:0,lastUpdate:(0,u.O5)()},{merge:!0}),(0,d.BH)((0,u.rJ)(p,"Transactions"),{userId:e,pricePaid:l,paypalTxId:a,type:"withdraw",timestamp:(0,u.O5)()}),alert("Riscossione di €".concat(l.toFixed(2)," completata! Transazione ID: ").concat(a)),a}catch(e){console.error("Withdrawal failed:",e),alert("Si \xe8 verificato un errore durante la riscossione. Riprova.")}}function b(){let[e,t]=(0,s.useState)(!1),{wallet:a,addCredits:d,resetCredits:m}=(0,c.v)(),[b,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{v(x())},[]),(0,s.useEffect)(()=>{b&&(async()=>{let e=(0,u.H9)(p,"Wallets",b),t=await (0,u.x7)(e);t.exists()&&d(t.data().credit)})()},[b,d]);let f=async()=>{b&&(t(!0),await h(b),m(),t(!1))};return(0,l.jsxs)("div",{className:"min-h-screen bg-black pb-36 pt-16 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[(0,l.jsx)(n.P.div,{className:"absolute w-[500px] h-[500px] rounded-full bg-purple-500/10 blur-[100px]",animate:{x:[-200,200,-200],y:[-100,100,-100]},transition:{duration:20,repeat:1/0,ease:"linear"},style:{top:"-20%",left:"-20%"}}),(0,l.jsx)(n.P.div,{className:"absolute w-[400px] h-[400px] rounded-full bg-green-500/10 blur-[100px]",animate:{x:[200,-200,200],y:[100,-100,100]},transition:{duration:15,repeat:1/0,ease:"linear"},style:{bottom:"-10%",right:"-10%"}})]}),(0,l.jsx)(n.P.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"relative sticky top-0 bg-black/80 backdrop-blur-xl border-b border-purple-500/10 px-4 py-4 z-10",children:(0,l.jsxs)("h1",{className:"text-white text-2xl font-bold text-center flex items-center justify-center gap-2",children:[(0,l.jsx)(n.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:(0,l.jsx)(r.A,{className:"w-6 h-6 text-purple-400"})}),"Il tuo Wallet"]})}),(0,l.jsx)("div",{className:"relative px-4 pt-10",children:(0,l.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-[#1a1a1a] to-[#0a0a0a] rounded-3xl p-6 border border-purple-500/20 relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 rounded-full bg-purple-500/20 blur-3xl"}),(0,l.jsx)("h2",{className:"text-gray-400 text-sm uppercase tracking-wider mb-4",children:"I tuoi Assets"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)(n.P.div,{whileHover:{scale:1.02},className:"bg-black/50 rounded-2xl p-4 border border-[#FFD700]/10 relative overflow-hidden",children:[(0,l.jsx)(n.P.div,{className:"absolute inset-0 bg-gradient-to-br from-[#FFD700]/10 to-transparent",animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0}}),(0,l.jsxs)("div",{className:"relative z-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(i.A,{className:"w-5 h-5 text-[#FFD700] fill-[#FFD700]"}),(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"Like"})]}),(0,l.jsx)(n.P.p,{initial:{scale:1.5,color:"#FFFFFF"},animate:{scale:1,color:"#FFFFFF"},className:"text-white text-3xl font-bold",children:a.likes},a.likes)]})]}),(0,l.jsxs)(n.P.div,{whileHover:{scale:1.02},className:"bg-black/50 rounded-2xl p-4 border border-purple-500/10 relative overflow-hidden",children:[(0,l.jsx)(n.P.div,{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent",animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,delay:.5}}),(0,l.jsxs)("div",{className:"relative z-10",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(o.A,{className:"w-5 h-5 text-purple-400"}),(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"Upload"})]}),(0,l.jsx)(n.P.p,{initial:{scale:1.5,color:"#FFFFFF"},animate:{scale:1,color:"#FFFFFF"},className:"text-white text-3xl font-bold",children:a.uploads},a.uploads)]})]})]})]})}),(0,l.jsx)("div",{className:"relative px-4 pt-10",children:(0,l.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-[#1a1a1a] to-[#0a0a0a] rounded-3xl p-6 border border-green-500/20 relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute -top-20 -left-20 w-40 h-40 rounded-full bg-green-500/10 blur-3xl"}),(0,l.jsxs)("h2",{className:"text-gray-400 text-sm uppercase tracking-wider mb-2 flex items-center gap-2",children:[(0,l.jsx)(r.A,{className:"w-4 h-4"}),"Il tuo Guadagno"]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-white text-4xl font-bold",children:["€",a.credits.toFixed(2)]}),(0,l.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:a.credits<5||e,className:"px-6 py-3 rounded-2xl font-bold text-lg transition-all bg-gradient-to-r from-green-500 to-emerald-500 text-white disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-green-500/20",children:e?"Processing...":"Riscuoti"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Minimo per riscuotere: €5.00"})]})})]})}},9591:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},9621:(e,t,a)=>{Promise.resolve().then(a.bind(a,9002))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,453,978,602,966,441,684,358],()=>t(9621)),_N_E=e.O()}]);