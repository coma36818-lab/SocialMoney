{
  "entities": {
    "Post": {
      "name": "Post",
      "type": "object",
      "properties": {
        "mediaUrl": {
          "type": "string",
          "description": "URL del media caricato"
        },
        "mediaType": {
          "type": "string",
          "enum": [
            "video",
            "photo",
            "audio"
          ],
          "description": "Tipo di media"
        },
        "authorName": {
          "type": "string",
          "description": "Nome dell'autore (opzionale)"
        },
        "authorId": {
          "type": "string",
          "description": "ID univoco dell'autore"
        },
        "description": {
          "type": "string",
          "description": "Descrizione del post"
        },
        "likes": {
          "type": "number",
          "default": 0,
          "description": "Numero di like ricevuti"
        },
        "likesWeek": {
          "type": "number",
          "default": 0
        },
        "boostScore": {
          "type": "number",
          "default": 0,
          "description": "Punteggio boost per classifica"
        },
        "creditValue": {
          "type": "number",
          "default": 0,
          "description": "Valore dei like in â‚¬ per l'autore"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp del post"
        },
        "boostPurchased": {
          "type": "number",
          "default": 0,
          "description": "Numero di boost acquistati"
        }
      },
      "required": [
        "mediaUrl",
        "mediaType",
        "authorId",
        "likes",
        "boostScore",
        "creditValue",
        "timestamp"
      ]
    },
    "Comment": {
      "name": "Comment",
      "type": "object",
      "properties": {
        "post_id": {
          "type": "string",
          "description": "ID del post commentato"
        },
        "author_name": {
          "type": "string",
          "description": "Nome dell'autore del commento"
        },
        "text": {
          "type": "string",
          "description": "Testo del commento"
        }
      },
      "required": [
        "post_id",
        "text"
      ]
    },
    "LikePackage": {
      "name": "LikePackage",
      "type": "object",
      "properties": {
        "packageName": {
          "type": "string",
          "description": "Name of the like package"
        },
        "likeCount": {
          "type": "number",
          "description": "Number of likes in the package"
        },
        "priceEuro": {
          "type": "number",
          "description": "Price of the package in Euro"
        }
      },
      "required": [
        "packageName",
        "likeCount",
        "priceEuro"
      ]
    },
    "Transaction": {
      "name": "Transaction",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Unique localStorage ID for the user"
        },
        "postId": {
          "type": "string",
          "description": "ID of the purchased post (optional)"
        },
        "likeCount": {
          "type": "number",
          "description": "Number of likes purchased (optional)"
        },
        "boostAmount": {
          "type": "number",
          "description": "Amount of boost purchased (optional)"
        },
        "pricePaid": {
          "type": "number",
          "description": "Price paid in Euro"
        },
        "paypalTxId": {
          "type": "string",
          "description": "PayPal transaction ID"
        },
        "type": {
          "type": "string",
          "enum": [
            "likePurchase",
            "withdraw",
            "boostPurchase",
            "uploadPurchase"
          ],
          "description": "Type of transaction"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the transaction"
        }
      },
      "required": [
        "userId",
        "pricePaid",
        "paypalTxId",
        "type",
        "timestamp"
      ]
    },
    "Wallet": {
      "name": "Wallet",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Unique localStorage ID for the user/author"
        },
        "credit": {
          "type": "number",
          "description": "Accumulated credit from likes in Euro"
        },
        "commission": {
          "type": "number",
          "description": "Commission rate on each purchased like"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the last wallet update"
        },
        "lastUpload": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the last upload"
        }
      },
      "required": [
        "userId",
        "credit",
        "lastUpdate"
      ]
    },
    "UploadCooldown": {
      "name": "UploadCooldown",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["userId", "timestamp"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": {
            "$ref": "#/backend/entities/Post"
          },
          "description": "Stores social media posts with media, author, and engagement data.",
          "params": [
            {
              "name": "postId",
              "description": "Unique identifier for the post."
            }
          ]
        }
      },
      {
        "path": "comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": {
            "$ref": "#/backend/entities/Comment"
          },
          "description": "Stores comments for posts."
        }
      },
      {
        "path": "likePackages/{packageId}",
        "definition": {
          "entityName": "LikePackage",
          "schema": {
            "$ref": "#/backend/entities/LikePackage"
          },
          "description": "Stores purchasable like packages."
        }
      },
      {
        "path": "transactions/{transactionId}",
        "definition": {
          "entityName": "Transaction",
          "schema": {
            "$ref": "#/backend/entities/Transaction"
          },
          "description": "Stores all PayPal transactions for likes and withdrawals."
        }
      },
      {
        "path": "wallets/{walletId}",
        "definition": {
          "entityName": "Wallet",
          "schema": {
            "$ref": "#/backend/entities/Wallet"
          },
          "description": "Stores the credit wallet for each author, identified by their unique localStorage userId.",
          "params": [
            {
              "name": "walletId",
              "description": "Should correspond to the author's userId."
            }
          ]
        }
      },
       {
        "path": "uploadCooldowns/{userId}",
        "definition": {
          "entityName": "UploadCooldown",
          "schema": {
            "$ref": "#/backend/entities/UploadCooldown"
          },
          "description": "Stores a timestamp of the last upload for a given user to enforce a daily limit.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user."
            }
          ]
        }
      }
    ]
  }
}
